<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css">
		*{margin: 0;padding: 0;}
		#main{width: 400px;height: 400px;/*background:orange;*/border: 2px solid black;margin: 0 auto;position: relative;overflow: hidden;}
		#conta{width: 100%;height: 400px;position: relative;top: -100px;background: white;}
		.row{width: 100%;height: 100px;}
		.cell{width: 100px;height: 100px;float: left;}
		.black{background: black;}
		#jf{text-align: center;}
	</style>
</head>
<body>
<h1 id="jf">0</h1>
	<div id="main">
		<div id="conta">
			<!-- <div class="row">
				<div class="cell"></div>
				<div class="cell"></div>
				<div class="cell"></div>
				<div class="cell"></div>
			</div>
			<div class="row">
				<div class="cell"></div>
				<div class="cell"></div>
				<div class="cell"></div>
				<div class="cell"></div>
			</div>
			<div class="row">
				<div class="cell"></div>
				<div class="cell"></div>
				<div class="cell"></div>
				<div class="cell"></div>
			</div>
			<div class="row">
				<div class="cell"></div>
				<div class="cell"></div>
				<div class="cell"></div>
				<div class="cell"></div>
			</div> -->
		</div>
	</div>
</body>
</html>

<script type="text/javascript">
	var time = null;
	var ks =0;
	//定时器
	function start(){
		// clearInterval(time);
		time=window.setInterval('move()',30);

	}


	//计分函数
	function jf(){
		$('jf').innerHTML=parseInt($('jf').innerHTML)+10;
		return $('jf').innerHTML
	}

	//删除最后一行
	function delrow(){
		var con =  $('conta');
		con.removeChild(con.lastChild);
	}



	//让conta动起来
	function move(){
		var con = $('conta');
		var top=parseInt(window.getComputedStyle(con,null)['top']);
		top+=4;						//调节速度
		con.style.top = top+'px';
		if (top==0) {
			cjrow();
			con.style.top = -100+'px';
			delrow();
		}else if(top == -96){
			var zys = con.children;
			if ((zys.length == 5)&&(zys[zys.length-1].pass !==1)) {
				clearInterval(time);
				ks = 3;
				alert('GAME OVER!!!')
			}
		}	
	}




	//刚开始 创建一个调用cjrow的方法
	function intr(){
		for (var i = 0; i < 4; i++) {
			cjrow();
		}
	//事件委托
		$('conta').onclick = function(ev){
			if (ks == 3) {
				alert('请不要耍小聪明');
				return;
			}
			if (ev.target.className.indexOf('black')==-1) {
				clearInterval(time);
				ks = 3;
				alert('GAME OVER!!!');

			}else{
				ev.target.className = 'cell';
				ev.target.parentNode.pass = 1;
				jf();
			}
			
			
		}
	}




	//创建div.row
	function cjrow(){
		var row = cjdiv('row');
		var classs = sj();
		for (var i = 0; i < 4; i++) {
			row.appendChild(cjdiv(classs[i]));
		}
		if ($('conta').firstChild ==null) {
			$('conta').appendChild(row);
		}else{
			$('conta').insertBefore(row,$('conta').firstChild);
		}
		
	}


	//创建一个div classname是他的类名
	function cjdiv(className){
		var div=document.createElement('div');
		div.className = className;
		return div;
	}




	//id名获取对对象
	function $(id){
		return document.getElementById(id);
	}




	//随机函数 返回一个数组，随机一个单元格，值为'cell black' 其他三个为'cell'
	function sj(){
		var arr = ['cell','cell','cell','cell'];
		var i = parseInt(Math.random()*4);
		arr[i] = 'cell black';
		return arr;
	}



	intr();
	start();
</script>